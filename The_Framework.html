<html>
    <head>
        <title>
            The Framework
        </title>
        <style>
            body{
                display: grid;
                align-content: baseline;
                justify-content: center;
            }
            .box{
                background-color: blue;
                width: 10px;
            }
            div{
                text-align: center;
            }
            button{
                align-content: end;
            }
            caption{
                font-size: x-large;
                font-variant-caps: small-caps;
            }
            td{
                text-align: center;
                width: max-content;
            }
        </style>
        <script>
            window.onload = function load()
            {
                function clock()
                {
                    var clock = document.getElementById("clock");
                    var today = document.getElementById("day");
                    var dateOfToday = document.getElementById("dateToday");
                    var date = new Date();
                    var day = date.getDay();
                    switch (day)
                    {
                        case 0:
                            day = "Sunday";
                            break;
                        case 1:
                            day = "Monday";
                            break;
                        case 2:
                            day = "Tuesday";
                            break;
                        case 3:
                            day = "Wednesday";
                            break;
                        case 4:
                            day = "Thursday";
                            break;
                        case 5:
                            day = "Friday";
                            break;
                        case 6:
                            day = "Saturday";
                            break;
                    }
                    today.innerHTML = day;
                    var dateToday = date.getDate();
                    if (dateToday < 10)
                    {
                        dateToday = "0" + dateToday;
                    }
                    var month = date.getMonth();
                    switch (month)
                    {
                        case 0:
                            month = "January";
                            break;
                        case 1:
                            month = "February";
                            break;
                        case 2:
                            month = "March";
                            break;
                        case 3:
                            month = "April";
                            break;
                        case 4:
                            month = "May";
                            break;
                        case 5:
                            month = "June";
                            break;
                        case 6:
                            month = "July";
                            break;
                        case 7:
                            month = "August";
                            break;
                        case 8:
                            month = "September";
                            break;
                        case 9:
                            month = "October";
                            break;
                        case 10:
                            month = "November";
                            break;
                        case 11:
                            month = "December";
                            break;
                    }
                    var year = date.getFullYear();
                    dateOfToday.innerHTML = dateToday + " " + month + "," + year;
                    var hour = date.getHours();
                    if (hour < 10)
                    {
                        hour = "0" + hour;
                    }
                    var minute = date.getMinutes();
                    if (minute < 10)
                    {
                        minute = "0" + minute;
                    }
                    var second = date.getSeconds();
                    if (second < 10)
                    {
                        second = "0" + second;
                    }
                    clock.innerHTML = hour + ":" + minute + ":" + second;
                }
                setInterval(clock, 1000);
            }
            var task;
            var resource;
            var deadline = new Array();
            var inputs = new Array();
            function addTask()
            {
                task = prompt("Enter name of task");
                resource = prompt("Enter resources");
                deadlineCalc();
                function form(){
                    
                }
                function deadlineCalc()
                {
                    deadline = prompt(form());
                    var date = new Date();
                    var year = date.getFullYear();
                    var month = date.getMonth();
                    var dateToday = date.getDate();
                    var deadliney = (deadline[6]+deadline[7]+deadline[8]+deadline[9]) - (year);
                    var deadlinem = (deadline[3]+deadline[4]) - (month + 1);
                    var deadlined = (deadline[0]+deadline[1]) - (dateToday);
                    inputs[1] = task;
                    inputs[2] = resource;
                    if ((deadlined < 0) || (deadlinem < 0) || (deadliney < 0))
                    {
                        alert("Invalid Entry\nTime already passed");
                        deadlineCalc();
                    }
                    else if(!(deadline))
                    {
                        inputs[5] = "TBD";
                    }
                    else
                    {
                        if ((deadlined == 0) && (deadlinem == 0) && (deadliney == 0))
                        {
                            {
                                var date = new Date();
                                var hour = date.getHours();
                                var minute = date.getMinutes();
                                var second = date.getSeconds();
                                deadlinehr = (deadline[11] + deadline[12]) - (hour);
                                deadlinemin = (deadline[14] + deadline[15] - 1) - (minute);
                                deadlinesec = 60 - second;
                                if ((deadline[14] + deadline[15]) < minute)
                                {
                                    deadlinemin = (60 + minute) - deadlinemin;
                                    deadlinehr = deadlinehr - 1;
                                }
                                if (deadlinehr < 0)
                                {
                                    alert("Invalid Entry\nTime already passed");
                                    deadlineCalc();
                                }
                                else if (deadlinehr == 0)
                                {
                                    if (deadlinemin < 0)
                                    {
                                        alert("Invalid Entry\nTime already passed");
                                        deadlineCalc();
                                    }
                                    else
                                    {
                                        inputs[5] = deadlinehr + "h" + deadlinemin + "m" + deadlinesec + "s";
                                    }
                                }
                                else
                                {
                                    inputs[5] = deadlinehr + "h" + deadlinemin + "m" + deadlinesec + "s";
                                }
                                console.log("me");
                            }
                        
                        }
                        else
                        {
                            inputs[5] = deadliney + "y" + deadlinem + "m" + deadlined + "d";
                        }
                    }
                }
                oneMoreRow();
            }
            function oneMoreRow()
            {
                var addRow = document.getElementById("tbody");
                var newRow = document.createElement("tr");
                addRow.appendChild(newRow);
                for(var i = 0;i < 7; i++)
                {
                    if(!(inputs[i]))
                    {
                        inputs[i] = "N/A";
                    }
                }
                newRow.innerHTML = `
                <td>${inputs[0]}</td>
                <td>${inputs[1]}</td>
                <td>${inputs[2]}</td>
                <td>${inputs[3]}</td>
                <td>
                    <select>
                        <option>1</option>
                        <option>2</option>
                    </select>
                </td>
                <td>${inputs[5]}</td>
                <td>${inputs[6]}</td>`;
                console.log(newRow.innerHTML);
                /*for (var i = 0; i < 7; i++)
                {
                    var newColumns = document.createElement("td");
                    newRow.appendChild(newColumns);
                    if(!(inputs[i]))
                    {
                        inputs[i] = "N/A";
                    }
                    var text = document.createTextNode(inputs[i]);
                    newColumns.appendChild(text);
                }*/
            }
        </script>
    </head>
    <body>
        <div id = "clock"></div>
        <div id = "day"></div>
        <div id = "dateToday"></div>  
        <button onclick = "addTask()">
            +
        </button>
        <table border="1">
            <caption>The Framework</caption>
            <tbody id = "tbody">
                <tr>
                    <td>Priority Level</td>
                    <td>Task</td>
                    <td>Resource</td>
                    <td>Difficulty</td>
                    <td>Status</td>
                    <td>Deadline</td>
                    <td>Notes</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>
                        <select>
                            <option id = "options" >1</option>
                            <option>2</option>
                        </select>
                    </td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </body>
</html>